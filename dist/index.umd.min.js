!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(r="undefined"!=typeof globalThis?globalThis:r||self).forMore=t()}(this,function(){"use strict";
/**
     * for-more - Multithread Synchronization Loop Library with Promise Support
     * @version 1.1.0
     * @author LinQuan
     * @license MIT
     */var r=function(r){return"[object Promise]"===Object.prototype.toString.call(r)},t=function(r){return"[object Function]"===Object.prototype.toString.call(r)},e=function(r){return"[object Error]"===Object.prototype.toString.call(r)},n=function(r){return"[object Number]"===Object.prototype.toString.call(r)},o=function(r){return Array.isArray(r)||"object"==typeof r&&null!==r&&"length"in r&&"number"==typeof r.length},c=function(r){return Array.isArray(r)?r:Array.from(r)};function i(n,o,c,i,a,u){var l=0,f=0,s=!1,b=[],p=function(){s=!0,f=o};function y(){var t=f++;if(!(t>=o||s)){var i,a=n[t];try{i=c(a,t,n)}catch(r){i=r}return r(i)?i.then(function(r){return d(t,r,!1)}).catch(function(r){return d(t,r,!0)}):d(t,i,e(i))}}function d(r,e,c){if(!s){if(c){var f=i.abort;if(t(i.onError)&&(f=i.onError(e,r,n[r])||i.abort),f)return p(),i.callback?i.callback(b,n):u(e)}return b[r]=e,++l===o?i.callback?i.callback(b,n):a(b,n):y()}}for(var h=i.lines||i.concurrency||1,j=0;j<h&&f<o;j++)y();return{cancel:p}}var a=function(r,e,a,u){var l=this;if(!o(r))throw new TypeError("Expected the first argument to be an array or array-like object");var f=c(r),s=f.length>>>0;if(!s){var b=Promise.resolve([]);return Object.assign(b,{cancel:function(){}})}var p,y,d={};if(n(e)?(d={lines:e},p=a,y=u):t(e)?(p=e,y=a):(d=e||{},p=a,y=u),!t(p))throw new TypeError("Expected handler to be a function");var h,j=Object.assign({},{promiseLibrary:Promise,abort:!1,concurrency:1},d,{lines:Math.min(parseInt(String(d.lines||d.concurrency)),s)||1,callback:t(y)?y:void 0}),v=new j.promiseLibrary(function(r,t){var e=i.call(l,f,s,p,j,r,t).cancel;h=e});return Object.assign(v,{cancel:function(){h&&h()}})};return Array.prototype.forMore=function(r,t,e){var n=Object(this);return a.call(this,n,r,t,e)},"object"==typeof exports&&(module.exports=a,module.exports.default=a),a});
//# sourceMappingURL=index.umd.min.js.map
